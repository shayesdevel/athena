spring:
  application:
    name: athena

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:athena}
    username: ${DB_USER:athena}
    password: ${DB_PASSWORD:athena}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      auto-commit: true
      pool-name: AthenaHikariCP

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        show_sql: false
        jdbc:
          time_zone: UTC
    open-in-view: false

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    validate-on-migrate: true
    out-of-order: false

  mail:
    host: ${SMTP_HOST:smtp.gmail.com}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

logging:
  level:
    com.athena: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# External API Integrations
anthropic:
  api:
    key: ${ANTHROPIC_API_KEY:your-api-key-here}
    base-url: https://api.anthropic.com
    model: claude-3-5-sonnet-20241022

# Microsoft Teams Webhook
teams:
  webhook:
    url: ${TEAMS_WEBHOOK_URL:}
    enabled: ${TEAMS_WEBHOOK_ENABLED:false}

athena:
  email:
    from: ${EMAIL_FROM:noreply@athena.local}
    enabled: ${EMAIL_ENABLED:false}

  # SAM.gov Data Loader
  data:
    loader:
      sam-gov:
        data-directory: ${SAM_GOV_DATA_DIR:./data/sam-gov}

  # AI Scoring Configuration
  scoring:
    company-capabilities: ${COMPANY_CAPABILITIES:Government contracting experience with cloud infrastructure, cybersecurity, and data analytics}

  # Alert Configuration
  alerts:
    enabled: ${ALERTS_ENABLED:true}
    high-score-threshold: ${HIGH_SCORE_THRESHOLD:80}
    lookback-hours: ${LOOKBACK_HOURS:24}
    high-score-cron: ${HIGH_SCORE_CRON:0 0 8 * * MON-FRI}
    recipient-email: ${ALERTS_RECIPIENT_EMAIL:}

  # Weekly Digest Configuration
  digest:
    enabled: ${DIGEST_ENABLED:true}
    weekly-cron: ${WEEKLY_DIGEST_CRON:0 0 9 * * MON}
    recipient-email: ${DIGEST_RECIPIENT_EMAIL:}
